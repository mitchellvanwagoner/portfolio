<div class="project-container">
    <h1>Trebuchet</h1>
    <div class="project-header">
        <p class="project-date">9/2025 - 10/2025</p>
    </div>

    <div class="project-content">
        <section class="project-overview">
            <h2>Overview</h2>
            
            <div class="image-text-block image-left size-md">
                <div class="image-container">
                    <img src="data/trebuchet (0.1).jpg" alt="Project Main Image" class="hover-close">
                    <div class="image-caption">Me releasing the trebuchet</div>
                </div>
                <div class="text-container">
                    <p>
                        I designed and built a physics-optimized trebuchet that can launch an apple 20 meters using only the weight of a 5-gallon bucket filled with water. What makes this project unique is that instead of using a traditional counterweight-on-arm design, I built a pulley mechanism that provides better energy transfer and eliminates the pendulum oscillation that typically happens after the projectile is released.
                    </p>
                    <p>
                        The entire design was optimized using the Euler-Lagrange method to derive the equations of motion for the system, then simulated and optimized in Python. I used numerical optimization to find the ideal parameters for arm length, sling length, pulley radius, counterweight mass, and release angle. Once I had the optimized design, I fabricated it using wood working for the frame and 3D printing for the custom pulley assembly.
                    </p>
                    <p>
                        The system was designed to be transportable, the vertical beams fold down so the entire trebuchet fits in the back of my car. After several rounds of tuning and testing, the real-world performance matched closely with the simulation, successfully throwing apples the target distance while smoothly coming to rest without oscillation.
                    </p>
                </div>
            </div>

            <div class="tech-stack">
                <h3>Technologies Used</h3>
                <div class="tech-badges">
                    <span class="tech-badge hover-close">Euler-Lagrange Method</span>
                    <span class="tech-badge hover-close">Python</span>
                    <span class="tech-badge hover-close">Wood Working</span>
                    <span class="tech-badge hover-close">3D Printing</span>
                </div>
            </div>

            <!-- Optional Project Links Section -->
            <!-- <div class="project-links">
                <h3>Project Links</h3>
                <div class="links">
                    <a href="[github-url]" target="_blank" class="project-btn hover-close">
                        View on GitHub
                    </a>
                    <a href="[documentation-url]" target="_blank" class="project-btn hover-close">
                        Documentation
                    </a>
                    <a href="[demo-url]" target="_blank" class="project-btn hover-close">
                        Live Demo
                    </a>
                </div>
            </div> -->

            <div class="challenges-list">
                <h3>Challenges & Solutions</h3>
                <ul>
                    <li>
                        <strong>Challenge:</strong> Optimization and creating the loss function<br>
                        <strong>Solution:</strong> During simulation, I ran into issues developing the loss function for my optimizer. The optimizer kept finding physically impossible solutions, which led me back through my calculations. I discovered a sign error that was causing the total energy in my system to grow instead of decay.

                        Beyond fixing the physics, I needed to create costs for three key parameters: distance from target, total mass of the system, and efficiency of energy transfer. Once I built those costs and tuned how much each one contributed to the total loss function, the optimizer started working properly.
                    </li>
                    <li>
                        <strong>Challenge:</strong> Basket gripping the apple too tightly<br>
                        <strong>Solution:</strong> After building the trebuchet, I found that the leather basket was pulled too tightly around the apple due to the tension in the sling. To fix this, I had to remove some of the supporting strings around the leather basket. This solved the grip issue, but now the apple doesn't sit securely while the trebuchet is stationary. I'll be redesigning this part from scratch for version two.
                </ul>
            </div>

            <br>

            <div class="project-gallery carousel-compact" id="trebuchet-project">
                <h3>Project Gallery</h3>
                <div class="carousel-container hover-far"></div>
            </div>
            
        </section>




        <section class="project-report">
            <h2>Project Report</h2>
            
            <!-- Section 1 -->
            <h3>System Analysis and Optimization</h3>
            <hr>
            
            <div class="image-text-block image-left size-xl">
                <div class="image-container">
                    <img src="data/trebuchet_eq (1).jpg" alt="System Diagram and Overview" class="zoomable-image">
                    <div class="image-caption">System Diagram and Overview</div>
                </div>
                <div class="text-container">
                    <p>
                        To start the project, I first drew a diagram of the system and stated my assumptions. My biggest assumption was that the sling would stay taught throughout the throw. This turned out to be not quite correct, but it still led to a good enough simulation.
                    </p>
                    <p>
                        I then wrote out the kinematic equations for each component of the system and identified the degrees of freedom I'd need to solve for. I split the system into three major components: the counterweight, the pulley and arm assembly, and the projectile.
                    </p>
                </div>
            </div>

            <div class="image-text-block image-left size-xl">
                <div class="image-container">
                    <img src="data/trebuchet_eq (2).jpg" alt="Energy Analysis of the System" class="zoomable-image">
                    <div class="image-caption">Energy Analysis of the System</div>
                </div>
                <div class="text-container">
                    <p>
                        Then using the kinematic equations, I wrote the energetic equations, capturing both the kinetic and potential energies for each component. 
                    </p>
                </div>
            </div>

            <div class="image-text-block image-left size-xl">
                <div class="image-container">
                    <img src="data/trebuchet_eq (3).jpg" alt="Euler-Lagrange equations" class="zoomable-image">
                    <div class="image-caption">Euler-Lagrange equations</div>
                </div>
                <div class="text-container">
                    <p>
                        This is where the Euler-Lagrange method comes in. This method produces the equations of motion for a system by minimizing what's called the action, based on the energies of the system.
                    </p>
                    <p>
                        It takes in the lagrangian for the system with respect to one of the degrees of freedom, in this case either the rotational speed of the arm or the rotational speed of the projectile, and finds the point where the lagrangian is minimized. This method comes from the calculus of variations, a branch of mathematics that deals with finding the extrema of functions.
                    </p>
                </div>
            </div>

            <div class="image-text-block image-left size-xl">
                <div class="image-container">
                    <img src="data/trebuchet_eq (4).jpg" alt="Equations of Motion" class="zoomable-image">
                    <div class="image-caption">Equations of Motion</div>
                </div>
                <div class="text-container">
                    <p>
                        I found both equations, one for each degree of freedom, which together make up the equations of motion for this system. You'll notice each equation contains rotational acceleration terms for both DOFs, as well as multiple terms for the speed and position of each DOF.
                    </p>
                    <p>
                        This is because the degrees of freedom are coupled, and one cannot be found without the other. This is part of what makes these systems so complicated and why they must be solved numerically instead of analytically.
                    </p>
                </div>
            </div>




            <div class="image-text-block image-right size-xl">
                <div class="image-container">
                    <img src="data/trebuchet_eq (5).png" alt="Euler-Lagrange equations" class="hover-close">
                    <div class="image-caption">Energy of the System During Operation</div>
                </div>
                <div class="text-container">
                    <p>
                        After finding the equations of motion, I wrote a Python simulator and optimizer using the solve_ivp and differential_evolution functions from the scipy library. I needed to find the optimal values for the length of the arm, length of the sling, radius of the pulley, mass of the counterweight, and the release angle.
                    </p>
                    <p>
                        To program the optimizer, I needed to create costs for three key parameters: distance from target, total mass of the system, and efficiency of energy transfer. Once I created those costs, I adjusted how much each one fed back into the total loss function to get the optimizer working properly.
                    </p>
                    <p>
                        However, I kept running into issues, the optimizer kept finding solutions that were not physically possible. This led me back to my physics equations where I discovered a sign error that was causing the total energy in my system to grow instead of decay. After fixing that and tuning the loss function weights, the optimizer quickly started finding valid solutions for my trebuchet.
                    </p>
                    <p>
                        I chose to throw the projectile, in this case an apple, 20 meters using only the weight of a 5-gallon bucket filled with water. Using a bucket meant I could easily transport the system and precisely control the weight, since I'd have access to a garden hose to fill it.
                    </p>
                    <p>
                        Once I found the final parameters, I recorded the energies of the trebuchet components during its throw and graphed the results, shown to the right. This graph shows the total energy slightly decreasing over time as some is lost to friction and drag, with the rest of the component energies being smoothly transferred into the kinetic energy of the projectile (shown as the solid red line).
                    </p>
                </div>
            </div>

            <div class="image-text-block image-right size-xl">
                <div class="image-container">
                    <img src="data/trebuchet_eq (6).gif" alt="Equations of Motion" class="hover-close">
                    <div class="image-caption">Animation of the Trebuchet System and Trajectory of the Projectile</div>
                </div>
                <div class="text-container">
                    <p>
                        The animation to the right shows the operation of the trebuchet system as well as the ballistic trajectory of the projectile after release. You can see the smooth transition from rotational energy of the arm and sling into the linear kinetic energy of the projectile.
                    </p>
                    <p>
                        The key insight here, which can be easily seen in the energies plot above, is that the potential energy of the counterweight drives the rotating system until its moment of inertia is at its peak. This happens when the projectile is at its maximum distance from the pivot. At this point the projectile has the greatest linear speed.
                    </p>
                    <p>
                        The mass of the counterweight and radius of the pulley are tuned to match this moment of inertia. This results in the best transfer of energy while utilizing the smallest counterweight mass required.
                    </p>
                </div>
            </div>






            <!-- Section 2 -->
            <h3>Fabrication and Assembly</h3>
            <hr>

            <div class="image-text-block image-right size-md">
                <div class="image-container">
                    <img src="data/Trebuchet (2).jpg" alt="Trebuchet fabrication step 2" class="hover-close">
                    <div class="image-caption">[Caption for image 2]</div>
                </div>
                <div class="text-container">
                    <p>
                        The frame was built with 2x6s as the base and 2x4s for the supporting arms. I wanted the vertical beams that hold the pivot point to be rotatable so I could fold up the trebuchet for transport. I built a small support structure that would bolt into the vertical beam and also help resist lateral loads.
                    </p>
                    <p>
                        This image shows the "wings", the lateral 2x6s, as fairly large, but I later cut those down so it would be easier to fit in the back of my car.
                    </p>
                    <p>
                        In the corners I used construction brackets to add a little more stability and strength to the joints.
                    </p>
                </div>
            </div>

            <div class="image-text-block image-right size-md">
                <div class="image-container">
                    <img src="data/Trebuchet (3).jpg" alt="Trebuchet fabrication step 3" class="hover-close">
                    <div class="image-caption">[Caption for image 3]</div>
                </div>
                <div class="text-container">
                    <p>
                        The next step was to design and build the pulley. I sized it to the radius found by the optimizer, then printed it out. I made sure to use 100% infill so the moment of inertia matched what I had used in the simulator. It was printed with PETG, which would be strong enough to take any impacts that might be transferred through the shaft from the arm.
                    </p>
                    <p>
                        The design utilized clamping sections on each end that I could bolt to clamp onto the shaft. This mostly worked, but I couldn't apply enough force to the clamps without snapping the plastic. To combat this, I simply drilled through each clamping section and through the shaft in a radial manner, then dropped a long bolt through the hole.
                    </p>
                    <p>
                        The only other function of the pulley, besides translating the counterweight motion to rotation, was to act as a trigger to release the trebuchet from its starting position. To accomplish this, I designed a bump-out tab that would be held in place by a trigger mechanism mounted to one of the vertical beams.
                    </p>
                    <p>
                        However, the counterweight proved too much for the trigger mechanism, and I had to simply hold the arm in place and release it manually. This is something I'll reconsider when I design the second version.
                    </p>
                </div>
            </div>

            <div class="image-text-block image-left size-md">
                <div class="image-container">
                    <img src="data/Trebuchet (4).jpg" alt="Trebuchet fabrication step 4" class="hover-close">
                    <div class="image-caption">[Caption for image 4]</div>
                </div>
                <div class="text-container">
                    <p>
                        In the last step you could see the pulley wasn't printed all the way. The power cut out during the 30-hour print, and at the time I didn't have my printer on a UPS, so I had to reprint the top part and glue them together with CA glue.
                    </p>
                    <p>
                        This was a pain, but ultimately won't be much of an issue as the cable that wraps around the pulley will pull the two pieces together. There's little chance the bond will break.
                    </p>
                </div>
            </div>

            <div class="image-text-block image-left size-md">
                <div class="image-container">
                    <img src="data/Trebuchet (5).jpg" alt="Trebuchet fabrication step 5" class="hover-close">
                    <div class="image-caption">[Caption for image 5]</div>
                </div>
                <div class="text-container">
                    <p>
                        Here I've put the pulley on the shaft and one of the bearing blocks on.
                    </p>
                </div>
            </div>

            <div class="image-text-block image-left size-md">
                <div class="image-container">
                    <img src="data/Trebuchet (6).jpg" alt="Trebuchet fabrication step 6" class="hover-close">
                    <div class="image-caption">[Caption for image 6]</div>
                </div>
                <div class="text-container">
                    <p>In order to get the vertical beam to rotate and bolt into the frame, it needs two holes drilled and counter sunk so I can fit the bolt through without the head of the bolt interfering with the arm of the trebuchet.</p>
                </div>
            </div>

            <div class="image-text-block image-right size-md">
                <div class="image-container">
                    <img src="data/Trebuchet (7).jpg" alt="Trebuchet fabrication step 7" class="hover-close">
                    <div class="image-caption">[Caption for image 7]</div>
                </div>
                <div class="text-container">
                    <p>
                        Here you can see the whole assembly together, with the pulley, bearing blocks, and arm all mounted to the vertical beams. I don't show it, but the arm is made from two 2x4s separated by an inch so the projectile can sit between them during loading.
                    </p>
                    <p>
                        The arm is then attached to the shaft by clamping the ends around it. I had to really torque the bolts down to get enough pressure on the shaft so it wouldn't slip, but it worked. However, I think I would drill through the shaft and put a bolt all the way through, like with the pulley, in the future. 
                    </p>
                </div>
            </div>

            <div class="image-text-block image-right size-md">
                <div class="image-container">
                    <img src="data/Trebuchet (9).jpg" alt="Trebuchet fabrication step 9" class="hover-close">
                    <div class="image-caption">[Caption for image 9]</div>
                </div>
                <div class="text-container">
                    <p>
                        Here is a close-up of the pulley and pivot assembly. You can see the tab on the pulley that was supposed to index with the trigger mechanism.
                    </p>
                    <p>
                        I did have to move the pulley further away from the assembly because the bucket was just barely too close to the arm and would get hit as it rotated around. This also led to a redesign of the trigger mechanism to account for this distance, but it wasn't strong enough at that distance to be useful.
                    </p>
                </div>
            </div>

            <div class="image-text-block image-right size-md">
                <div class="image-container">
                    <img src="data/Trebuchet (11).jpg" alt="Trebuchet fabrication step 11" class="hover-close">
                    <div class="image-caption">[Caption for image 11]</div>
                </div>
                <div class="text-container">
                    <p>
                        Here is the final assembly of the system. You can see the bucket is attached to the cable and it is then wrapped around the pulley. The sling is in place with the leather catch which is the orange string hanging in the middle of the arm.
                    </p>
                    <p>
                        As I said earlier, I did have to shorten the wings on either side so I could fit it in my car, but this is the completed system.
                    </p>
                </div>
            </div>






            <!-- Section 3 -->
            <h3>Testing and Operation</h3>
            <hr>

            <div class="image-text-block image-left size-md">
                <div class="video-container">
                    <iframe
                        src="https://www.youtube.com/embed/IAwEeweROlg"
                        title="Trebuchet Short"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                    </iframe>
                </div>
                <div class="text-container">
                    <p>
                        Here is a slow-motion shot of the trebuchet in action. This video was recorded after several attempts to tune in the system. Although all the parameters were specified by the optimizer, in the real world we still had to figure out what would work best. But after some time, we were able to get it working as expected.
                    </p>
                    <p>
                        You can see that the sling doesn't actually stay taut throughout the throw. The projectile falls, then the sling gets whipped around. This still worked out mostly as expected, and the parameters found by the optimizer were very close to what ended up working.
                    </p>
                </div>
            </div>

            <div class="image-text-block image-left size-md">
                <div class="video-container">
                    <iframe
                        src="https://www.youtube.com/embed/3Q519VdKkRo"
                        title="Trebuchet Video"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                    </iframe>
                </div> 
                <div class="text-container">
                    <p>
                        Here is the final video of the system working. The projectile is launched, and the system smoothly comes to a rest as the energy was effectively transferred into the projectile.
                    </p>
                    <p>
                        This is one of the reasons why I wanted to build a pulley mechanism. A traditional mechanism with the counterweight on the other end of the arm would cause the system to oscillate like a pendulum after the projectile is launched.
                    </p>
                    <p>
                        However, my mechanism is tuned such that the potential energy is spent by the counterweight by the time it reaches the ground, and the input into the system stops when the projectile is released.
                    </p>
                </div>
            </div>

        </section>

    </div> 
</div>